(window["webpackJsonpppleague-web"]=window["webpackJsonpppleague-web"]||[]).push([[0],{159:function(e,t,a){e.exports=a(316)},164:function(e,t,a){},165:function(e,t,a){},166:function(e,t,a){},167:function(e,t,a){},168:function(e,t,a){},169:function(e,t,a){},170:function(e,t,a){},171:function(e,t,a){},219:function(e,t,a){},305:function(e,t,a){},306:function(e,t,a){},316:function(e,t,a){"use strict";a.r(t);var r,n,l,i,o,s,c,u,p,h,m,y,d,g,b,f,v=a(0),O=a.n(v),S=a(4),j=a.n(S),E=(a(164),a(11)),P=a(12),k=a(22),w=a(21),M=a(19),C=a(23),N=(a(165),a(14)),I=a(53),A=a(29),L=a(18),B=(a(100),a(8)),U=new(r=function(){function e(){Object(E.a)(this,e),Object(A.a)(this,"players",n,this),Object(A.a)(this,"selectedPlayer",l,this),Object(A.a)(this,"userPlayer",i,this)}return Object(P.a)(e,[{key:"setPlayers",value:function(e){var t=this;this.players=[],e.sort(function(e,t){return t.rating-e.rating}),e.forEach(function(e,a){e.standing=a+1,t.players.push(e),e.playerId===t.userPlayer.playerId&&(t.userPlayer=e),null!=t.selectedPlayer&&e.playerId===t.selectedPlayer.playerId&&(t.selectedPlayer=e)})}},{key:"selectPlayer",value:function(e){this.selectedPlayer=e}},{key:"setUserPlayer",value:function(e){this.userPlayer=e}}]),e}(),n=Object(L.a)(r.prototype,"players",[B.l],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),l=Object(L.a)(r.prototype,"selectedPlayer",[B.l],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{}}}),i=Object(L.a)(r.prototype,"userPlayer",[B.l],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{}}}),Object(L.a)(r.prototype,"setPlayers",[B.d],Object.getOwnPropertyDescriptor(r.prototype,"setPlayers"),r.prototype),Object(L.a)(r.prototype,"selectPlayer",[B.d],Object.getOwnPropertyDescriptor(r.prototype,"selectPlayer"),r.prototype),Object(L.a)(r.prototype,"setUserPlayer",[B.d],Object.getOwnPropertyDescriptor(r.prototype,"setUserPlayer"),r.prototype),r),z=new(o=function(){function e(){Object(E.a)(this,e),Object(A.a)(this,"username",s,this),Object(A.a)(this,"email",c,this),Object(A.a)(this,"id",u,this),Object(A.a)(this,"player",p,this),Object(A.a)(this,"isAuthenticated",h,this)}return Object(P.a)(e,[{key:"setUser",value:function(e){this.id=e.id,this.username=e.name,this.email=e.email,this.isAuthenticated=!0,this.player=e.player}},{key:"getUserString",value:function(){return this.id+" "+this.username+" "+this.isAuthenticated}}]),e}(),s=Object(L.a)(o.prototype,"username",[B.l],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),c=Object(L.a)(o.prototype,"email",[B.l],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),u=Object(L.a)(o.prototype,"id",[B.l],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),p=Object(L.a)(o.prototype,"player",[B.l],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{}}}),h=Object(L.a)(o.prototype,"isAuthenticated",[B.l],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),Object(L.a)(o.prototype,"setUser",[B.d],Object.getOwnPropertyDescriptor(o.prototype,"setUser"),o.prototype),o),T=new(m=function(){function e(){Object(E.a)(this,e),Object(A.a)(this,"selectedPlayerMatches",y,this),Object(A.a)(this,"userPlayerMatches",d,this),Object(A.a)(this,"selectedPlayerLoading",g,this),Object(A.a)(this,"ongoingMatch",b,this)}return Object(P.a)(e,[{key:"setSelectedPlayerMatches",value:function(e){this.selectedPlayerMatches=e,this.selectedPlayerLoading=!1}},{key:"setUserPlayerMatches",value:function(e){this.userPlayerMatches=e}},{key:"setOngoingMatch",value:function(e){this.ongoingMatch=e}}]),e}(),y=Object(L.a)(m.prototype,"selectedPlayerMatches",[B.l],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),d=Object(L.a)(m.prototype,"userPlayerMatches",[B.l],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),g=Object(L.a)(m.prototype,"selectedPlayerLoading",[B.l],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),b=Object(L.a)(m.prototype,"ongoingMatch",[B.l],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{}}}),Object(L.a)(m.prototype,"setSelectedPlayerMatches",[B.d],Object.getOwnPropertyDescriptor(m.prototype,"setSelectedPlayerMatches"),m.prototype),Object(L.a)(m.prototype,"setUserPlayerMatches",[B.d],Object.getOwnPropertyDescriptor(m.prototype,"setUserPlayerMatches"),m.prototype),Object(L.a)(m.prototype,"setOngoingMatch",[B.d],Object.getOwnPropertyDescriptor(m.prototype,"setOngoingMatch"),m.prototype),m),D=(a(166),Object(N.c)(f=function(e){function t(){return Object(E.a)(this,t),Object(k.a)(this,Object(w.a)(t).apply(this,arguments))}return Object(C.a)(t,e),Object(P.a)(t,[{key:"render",value:function(){var e=this;return v.createElement("div",{onClick:function(t){return e.props.click(t,e.props.player)},className:"playerListItem"},v.createElement("span",{className:"rank"},v.createElement("h2",null,this.props.player.standing," ")),v.createElement("span",{className:"name"},v.createElement("h2",null,this.props.player.name)))}}]),t}(v.Component))||f),x=(a(167),"accessToken"),F=40,G=6,J=20;function H(e){var t=new Headers({"Content-Type":"application/json"});localStorage.getItem(x)&&t.append("Authorization","Bearer "+localStorage.getItem(x));var a={headers:t};return e=Object.assign({},a,e),fetch("/api"+e.url,e).then(function(e){return e.json().then(function(t){return e.ok?t:Promise.reject(t)})})}var R,Y,V,q,W={getMatchByPlayer:function(e){return H({url:"/match/byPlayer?playerId="+e.playerId,method:"GET"})},createMatch:function(e){return H({url:"/match",method:"POST",body:JSON.stringify(e)})},getOngoinMatch:function(){return H({url:"/match/ongoing",method:"GET"})},endMatch:function(e,t,a){var r={matchId:a,playerAScore:e,playerBScore:t};return H({url:"/match/end",method:"POST",body:JSON.stringify(r)})}},K=Object(N.b)("matchStore")(R=Object(N.b)("playerStore")(R=Object(N.c)(R=function(e){function t(){return Object(E.a)(this,t),Object(k.a)(this,Object(w.a)(t).apply(this,arguments))}return Object(C.a)(t,e),Object(P.a)(t,[{key:"onClick",value:function(e,t){var a=this;console.log("clicked "+e+" "+t.name),console.log(t.playerId),console.log(this.props.playerStore.userPlayer.playerId),t.playerId!==this.props.playerStore.userPlayer.playerId&&(this.props.playerStore.selectPlayer(t),this.props.matchStore.selectedPlayerLoading=!0,W.getMatchByPlayer(this.props.playerStore.selectedPlayer).then(function(e){a.props.matchStore.setSelectedPlayerMatches(e)}).catch(function(e){console.log(e)}))}},{key:"render",value:function(){var e=this;return v.createElement("div",{className:"playerList"},this.props.players.map(function(t,a){return v.createElement(D,{click:e.onClick.bind(e),key:t.id,player:t})}))}}]),t}(v.Component))||R)||R)||R,$={getPlayers:function(){return H({url:"/players",method:"GET"})}},_=a(319),Q=a(120),X=a.n(Q),Z=(a(168),a(169),a(318)),ee=(a(170),a(325)),te=a(327),ae=(a(171),Object(N.b)("matchStore")(Y=Object(N.c)(Y=function(e){function t(e){var a;return Object(E.a)(this,t),(a=Object(k.a)(this,Object(w.a)(t).call(this,e))).handleOk=function(e){console.log(e),console.log(a.state.playerAScore+" "+a.state.playerBScore),W.endMatch(a.state.playerAScore,a.state.playerBScore,a.ongoingMatch.id).then(function(e){a.setState({visible:!1})}).catch(function(e){console.log(e)})},a.handleCancel=function(e){console.log(e),a.setState({visible:!1})},a.state={visible:e.visible},a.ongoingMatch=a.props.matchStore.ongoingMatch,a.playerAScoreChange=a.playerAScoreChange.bind(Object(M.a)(a)),a.playerBScoreChange=a.playerBScoreChange.bind(Object(M.a)(a)),a}return Object(C.a)(t,e),Object(P.a)(t,[{key:"playerAScoreChange",value:function(e){this.setState({playerAScore:e})}},{key:"playerBScoreChange",value:function(e){this.setState({playerBScore:e})}},{key:"render",value:function(){return this.ongoingMatch.playerA?O.a.createElement("div",null,O.a.createElement(ee.a,{title:"Enter score",visible:this.state.visible,onOk:this.handleOk,onCancel:this.handleCancel,okButtonProps:{disabled:!1},cancelButtonProps:{disabled:!1}},O.a.createElement("div",{className:"players"},O.a.createElement("div",{className:"player playerA"},O.a.createElement("h2",null,this.ongoingMatch.playerA.user.name),O.a.createElement("div",null,O.a.createElement(te.a,{defaultValue:0,min:0,size:"large",onChange:this.playerAScoreChange}))),O.a.createElement("div",{className:"player playerB"},O.a.createElement("h2",null,this.ongoingMatch.playerB.user.name),O.a.createElement(te.a,{defaultValue:0,min:0,size:"large",onChange:this.playerBScoreChange}))))):""}}],[{key:"getDerivedStateFromProps",value:function(e,t){return t.visible!==e.visible?{visible:e.visible}:null}}]),t}(O.a.Component))||Y),Object(N.b)("playerStore")(V=Object(N.b)("matchStore")(V=Object(N.c)(V=function(e){function t(e){var a;return Object(E.a)(this,t),(a=Object(k.a)(this,Object(w.a)(t).call(this,e))).state={aScore:0,bScore:0},a.playerAScoreChange=a.playerAScoreChange.bind(Object(M.a)(a)),a.playerBScoreChange=a.playerBScoreChange.bind(Object(M.a)(a)),a}return Object(C.a)(t,e),Object(P.a)(t,[{key:"samePlayerAsMatch",value:function(e){return this.props.matchStore.ongoingMatch&&this.props.matchStore.ongoingMatch.playerB&&(this.props.matchStore.ongoingMatch.playerB.id===e||this.props.matchStore.ongoingMatch.playerA.id===e)}},{key:"onClick",value:function(e){var t=this;if(this.samePlayerAsMatch(this.props.playerStore.selectedPlayer.playerId))return console.log(this.state),void W.endMatch(this.state.aScore,this.state.bScore,this.props.matchStore.ongoingMatch.id).then(function(e){console.log(e),t.props.matchStore.ongoingMatch=null,t.setState({aScore:0,bScore:0}),$.getPlayers().then(function(e){t.props.playerStore.setPlayers(e)})}).catch(function(e){console.log(e)});var a={};a.playerAId=this.props.playerStore.userPlayer.playerId,a.playerBId=this.props.playerStore.selectedPlayer.playerId,W.createMatch(a).then(function(e){t.props.matchStore.ongoingMatch=e}).catch(function(e){console.log(e)})}},{key:"playerAScoreChange",value:function(e){this.setState({aScore:e})}},{key:"playerBScoreChange",value:function(e){this.setState({bScore:e})}},{key:"getNames",value:function(){return v.createElement("div",{className:"names"},v.createElement("span",null,this.props.matchStore.ongoingMatch.playerA.user.username),v.createElement("span",null,this.props.matchStore.ongoingMatch.playerB.user.username))}},{key:"getInputs",value:function(){if(this.samePlayerAsMatch(this.props.playerStore.selectedPlayer.playerId))return v.createElement("div",{className:"inputs"},v.createElement(te.a,{defaultValue:0,min:0,size:"large",onChange:this.playerAScoreChange}),v.createElement(te.a,{defaultValue:0,min:0,size:"large",onChange:this.playerBScoreChange}))}},{key:"render",value:function(){return v.createElement("div",{className:"matchButton"},this.getNames(),this.getInputs(),v.createElement("div",{onClick:this.onClick.bind(this),className:"button "+(this.samePlayerAsMatch(this.props.playerStore.selectedPlayer.playerId)?"endMatch":"createMatch")},this.samePlayerAsMatch(this.props.playerStore.selectedPlayer.playerId)?"END MATCH":"MATCH"))}}]),t}(v.Component))||V)||V)||V),re=function(e){function t(){return Object(E.a)(this,t),Object(k.a)(this,Object(w.a)(t).apply(this,arguments))}return Object(C.a)(t,e),Object(P.a)(t,[{key:"matchButton",value:function(){if(this.props.other)return v.createElement(ae,null)}},{key:"render",value:function(){return X.a.isEmpty(this.props.player)?v.createElement("div",{className:"playerPane"}):v.createElement("div",{className:"playerPane"},v.createElement("div",{className:"playerImage"},v.createElement(Z.a,{size:82,icon:"user"})),v.createElement("div",{className:"playerName"},"#",this.props.player.standing," ",this.props.player.name),v.createElement("div",{className:"playerRating"},v.createElement("h2",null,"Rating"),v.createElement("h2",null,this.props.player.rating)),this.matchButton())}}]),t}(v.Component),ne=Object(N.b)("playerStore")(q=Object(N.b)("userStore")(q=Object(N.c)(q=function(e){function t(){return Object(E.a)(this,t),Object(k.a)(this,Object(w.a)(t).apply(this,arguments))}return Object(C.a)(t,e),Object(P.a)(t,[{key:"componentDidMount",value:function(){var e=this;this.props.playerStore.selectPlayer(null),$.getPlayers().then(function(t){e.props.playerStore.setPlayers(t)})}},{key:"render",value:function(){return v.createElement("div",{className:"ladderContent",style:{height:"100%"}},v.createElement(_.a,{style:{height:"100%"},span:5},v.createElement(K,{players:this.props.playerStore.players})),v.createElement(_.a,{style:{height:"100%"},span:14},v.createElement(re,{player:this.props.playerStore.userPlayer}),v.createElement(re,{player:this.props.playerStore.selectedPlayer,other:!0})))}}]),t}(v.Component))||q)||q)||q,le=a(320),ie=a(328),oe=a(153),se=function(e){var t=e.component,a=e.userStore,r=Object(oe.a)(e,["component","userStore"]);return O.a.createElement(I.b,Object.assign({},r,{render:function(e){return a.isAuthenticated?O.a.createElement(t,Object.assign({},r,e)):O.a.createElement(I.a,{to:{pathname:"/login",state:{from:e.location}}})}}))},ce=a(38),ue=a(322),pe=a(324),he=a(10),me=a(33),ye=(a(219),{login:function(e){return H({url:"/auth/signin",method:"POST",body:JSON.stringify(e)})},signup:function(e){return H({url:"/auth/signup",method:"POST",body:JSON.stringify(e)})},checkUsernameAvailability:function(e){return H({url:"/user/checkUsernameAvailability?username="+e,method:"GET"})},checkEmailAvailability:function(e){return H({url:"/user/checkEmailAvailability?email="+e,method:"GET"})},getCurrentUser:function(){return localStorage.getItem(x)?H({url:"/user/me",method:"GET"}):Promise.reject("No access token set.")},getUserProfile:function(e){return H({url:"/users/"+e,method:"GET"})},getNotifications:function(){return H({url:"/user/notifications",method:"GET"})}}),de=ue.a.Item,ge=function(e){function t(e){var a;return Object(E.a)(this,t),(a=Object(k.a)(this,Object(w.a)(t).call(this,e))).handleSubmit=a.handleSubmit.bind(Object(M.a)(a)),a}return Object(C.a)(t,e),Object(P.a)(t,[{key:"handleSubmit",value:function(e){var t=this;e.preventDefault(),this.props.form.validateFields(function(e,a){if(!e){var r=Object.assign({},a);ye.login(r).then(function(e){localStorage.setItem(x,e.accessToken),t.props.onLogin()}).catch(function(e){401===e.status?ie.a.error({message:"League",description:"Your email or password is incorrect. Please try again!"}):ie.a.error({message:"League",description:e.message||"Sorry! Something went wrong. Please try again!"})})}})}},{key:"render",value:function(){var e=this.props.form.getFieldDecorator;return v.createElement(ue.a,{onSubmit:this.handleSubmit,className:"login-form"},v.createElement("h1",{className:"page-title"},"Login"),v.createElement(de,null,e("email",{rules:[{required:!0,message:"Please input your email!"}]})(v.createElement(pe.a,{prefix:v.createElement(he.a,{type:"user"}),size:"large",name:"email",placeholder:"Email"}))),v.createElement(de,null,e("password",{rules:[{required:!0,message:"Please input your Password!"}]})(v.createElement(pe.a,{prefix:v.createElement(he.a,{type:"lock"}),size:"large",name:"password",type:"password",placeholder:"Password"}))),v.createElement(de,null,v.createElement(me.a,{type:"primary",htmlType:"submit",size:"large",className:"login-form-button"},"Login"),"Or ",v.createElement(ce.a,{to:"/signup"},"register now!")))}}]),t}(v.Component),be=ue.a.create({name:"login_page"})(ge),fe=a(127);a(305);function ve(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),a.push.apply(a,r)}return a}function Oe(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?ve(a,!0).forEach(function(t){Object(fe.a)(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):ve(a).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}var Se,je=ue.a.Item,Ee=function(e){function t(e){var a;return Object(E.a)(this,t),(a=Object(k.a)(this,Object(w.a)(t).call(this,e))).validateEmail=function(e){return e?RegExp("[^@ ]+@[^@ ]+\\.[^@ ]+").test(e)?e.includes("@siemens-logistics.com")?2!=e.split("@")[0].split(".").length?{validateStatus:"error",errorMsg:"Email is not in 'name.surname@siemens-logistics.com' form"}:e.length>F?{validateStatus:"error",errorMsg:"Email is too long (Maximum ".concat(F," characters allowed)")}:{validateStatus:null,errorMsg:null}:{validateStatus:"error",errorMsg:"Email is not from 'siemens-logistics.com' domain"}:{validateStatus:"error",errorMsg:"Email not valid"}:{validateStatus:"error",errorMsg:"Email may not be empty"}},a.validatePassword=function(e){return e.length<G?{validateStatus:"error",errorMsg:"Password is too short (Minimum ".concat(G," characters needed.)")}:e.length>J?{validationStatus:"error",errorMsg:"Password is too long (Maximum ".concat(J," characters allowed.)")}:{validateStatus:"success",errorMsg:null}},a.state={email:{value:""},password:{value:""}},a.handleInputChange=a.handleInputChange.bind(Object(M.a)(a)),a.handleSubmit=a.handleSubmit.bind(Object(M.a)(a)),a.validateEmailAvailability=a.validateEmailAvailability.bind(Object(M.a)(a)),a.isFormInvalid=a.isFormInvalid.bind(Object(M.a)(a)),a}return Object(C.a)(t,e),Object(P.a)(t,[{key:"handleInputChange",value:function(e,t){var a=e.target,r=a.name,n=a.value;this.setState(Object(fe.a)({},r,Oe({value:n},t(n))))}},{key:"handleSubmit",value:function(e){var t=this;e.preventDefault();var a={email:this.state.email.value,password:this.state.password.value};ye.signup(a).then(function(e){ie.a.success({message:"League",description:"Thank you! You're successfully registered. Please Login to continue!"}),t.props.history.push("/login")}).catch(function(e){ie.a.error({message:"League",description:e.message||"Sorry! Something went wrong. Please try again!"})})}},{key:"isFormInvalid",value:function(){return!("success"===this.state.email.validateStatus&&"success"===this.state.password.validateStatus)}},{key:"render",value:function(){var e=this;return O.a.createElement("div",{className:"signup-container"},O.a.createElement("h1",{className:"page-title"},"Sign Up"),O.a.createElement("div",{className:"signup-content"},O.a.createElement(ue.a,{onSubmit:this.handleSubmit,className:"signup-form"},O.a.createElement(je,{label:"Email",hasFeedback:!0,validateStatus:this.state.email.validateStatus,help:this.state.email.errorMsg},O.a.createElement(pe.a,{size:"large",name:"email",type:"email",autoComplete:"off",placeholder:"Your email",value:this.state.email.value,onBlur:this.validateEmailAvailability,onChange:function(t){return e.handleInputChange(t,e.validateEmail)}})),O.a.createElement(je,{label:"Password",validateStatus:this.state.password.validateStatus,help:this.state.password.errorMsg},O.a.createElement(pe.a,{size:"large",name:"password",type:"password",autoComplete:"off",placeholder:"A password between 6 to 20 characters",value:this.state.password.value,onChange:function(t){return e.handleInputChange(t,e.validatePassword)}})),O.a.createElement(je,null,O.a.createElement(me.a,{type:"primary",htmlType:"submit",size:"large",className:"signup-form-button",disabled:this.isFormInvalid()},"Sign up"),"Already registed? ",O.a.createElement(ce.a,{to:"/login"},"Login now!")))))}},{key:"validateEmailAvailability",value:function(){var e=this,t=this.state.email.value,a=this.validateEmail(t);"error"!==a.validateStatus?(this.setState({email:{value:t,validateStatus:"validating",errorMsg:null}}),ye.checkEmailAvailability(t).then(function(a){a.available?e.setState({email:{value:t,validateStatus:"success",errorMsg:null}}):e.setState({email:{value:t,validateStatus:"error",errorMsg:"This Email is already registered"}})}).catch(function(a){e.setState({email:{value:t,validateStatus:"success",errorMsg:null}})})):this.setState({email:Oe({value:t},a)})}}]),t}(v.Component),Pe=a(31),ke=Object(Pe.a)(),we=(a(306),a(323)),Me=a(326),Ce=le.a.Header,Ne=Object(N.b)("userStore")(Se=Object(N.b)("matchStore")(Se=Object(N.c)(Se=function(e){function t(e){var a;return Object(E.a)(this,t),(a=Object(k.a)(this,Object(w.a)(t).call(this,e))).handleMenuClick=a.handleMenuClick.bind(Object(M.a)(a)),a}return Object(C.a)(t,e),Object(P.a)(t,[{key:"handleMenuClick",value:function(e){"logout"===e.key&&this.props.onLogout()}},{key:"render",value:function(){var e;return e=this.props.userStore.isAuthenticated?[O.a.createElement(we.a.Item,{key:"/"},O.a.createElement(ce.a,{to:"/"},O.a.createElement(he.a,{type:"home",className:"nav-icon"}))),O.a.createElement(we.a.Item,{key:"/profile",className:"profile-menu"},O.a.createElement(Ie,{currentUser:this.props.userStore,handleMenuClick:this.handleMenuClick}))]:[O.a.createElement(we.a.Item,{key:"/login"},O.a.createElement(ce.a,{to:"/login"},"Login")),O.a.createElement(we.a.Item,{key:"/signup"},O.a.createElement(ce.a,{to:"/signup"},"Signup"))],O.a.createElement(Ce,{className:"app-header"},O.a.createElement("div",{className:"container"},O.a.createElement("div",{className:"app-title"},O.a.createElement(ce.a,{to:"/"},"League")),O.a.createElement(we.a,{className:"app-menu",mode:"horizontal",theme:"dark",selectedKeys:[this.props.location.pathname],style:{lineHeight:"64px"}},e)))}}]),t}(v.Component))||Se)||Se)||Se;function Ie(e){var t=O.a.createElement(we.a,{theme:"light",onClick:e.handleMenuClick,className:"profile-dropdown-menu"},O.a.createElement(we.a.Item,{key:"user-info",className:"dropdown-item",disabled:!0},O.a.createElement("div",{className:"user-full-name-info"},e.currentUser.name),O.a.createElement("div",{className:"username-info"},"@",e.currentUser.username)),O.a.createElement(we.a.Divider,null),O.a.createElement(we.a.Item,{key:"profile",className:"dropdown-item"},O.a.createElement(ce.a,{to:"/users/".concat(e.currentUser.username)},"Profile")),O.a.createElement(we.a.Item,{key:"logout",className:"dropdown-item"},"Logout"));return O.a.createElement(Me.a,{overlay:t,trigger:["click"],getPopupContainer:function(){return document.getElementsByClassName("profile-menu")[0]}},O.a.createElement("a",{href:"#",className:"ant-dropdown-link"},O.a.createElement(he.a,{type:"user",className:"nav-icon",style:{marginRight:0}})," ",O.a.createElement(he.a,{type:"down"})))}var Ae,Le=Object(I.g)(Ne),Be=a(321);function Ue(e){var t=O.a.createElement(he.a,{type:"loading-3-quarters",style:{fontSize:30},spin:!0});return O.a.createElement(Be.a,{indicator:t,style:{display:"block",textAlign:"center",marginTop:30}})}var ze=le.a.Content,Te={playerStore:U,userStore:z,matchStore:T},De=Object(N.c)(Ae=function(e){function t(e){var a;return Object(E.a)(this,t),(a=Object(k.a)(this,Object(w.a)(t).call(this,e))).state={isLoading:!1},a.handleLogout=a.handleLogout.bind(Object(M.a)(a)),a.loadCurrentUser=a.loadCurrentUser.bind(Object(M.a)(a)),a.handleLogin=a.handleLogin.bind(Object(M.a)(a)),ie.a.config({placement:"topRight",top:70,duration:3}),a}return Object(C.a)(t,e),Object(P.a)(t,[{key:"loadCurrentUser",value:function(){var e=this;this.setState({isLoading:!0}),ye.getCurrentUser().then(function(t){console.log(t),z.setUser(t),U.setUserPlayer(t.player),console.log(z.getUserString()),console.log(z.isAuthenticated),W.getOngoinMatch().then(function(e){T.setOngoingMatch(e),console.log(e)}).catch(function(e){console.log(e)}),ye.getNotifications().then(function(e){console.log(e)}).catch(function(e){console.log(t)}),e.setState({isLoading:!1}),ke.push("/")}).catch(function(t){console.log(t),e.setState({isLoading:!1})})}},{key:"componentDidMount",value:function(){this.loadCurrentUser()}},{key:"handleLogout",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"/",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"success",a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"You're successfully logged out.";localStorage.removeItem(x),z.isAuthenticated=!1,z.id=0,z.username="",ke.push(e),ie.a[t]({message:"League",description:a})}},{key:"handleLogin",value:function(){ie.a.success({message:"League",description:"You're successfully logged in."}),this.loadCurrentUser()}},{key:"render",value:function(){var e=this;return this.state.isLoading?O.a.createElement(Ue,null):O.a.createElement(le.a,{className:"layout"},O.a.createElement(N.a,Te,O.a.createElement(I.c,{basename:"/web",history:ke},O.a.createElement(Le,{onLogout:this.handleLogout}),O.a.createElement(ze,{className:"app-content"},O.a.createElement("div",{className:"container"},O.a.createElement(I.d,null,O.a.createElement(se,Object.assign({exact:!0,path:"/"},Te,{component:ne,handleLogout:this.handleLogout})),O.a.createElement(I.b,{exact:!0,path:"/login",render:function(t){return O.a.createElement(be,Object.assign({onLogin:e.handleLogin},t))}}),O.a.createElement(I.b,{exact:!0,path:"/signup",component:Ee}),O.a.createElement(I.b,{render:function(e){return O.a.createElement("div",null,"NotFound")}})))))))}}]),t}(v.Component))||Ae;Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));j.a.render(O.a.createElement(De,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[159,1,2]]]);
//# sourceMappingURL=main.f88113e0.chunk.js.map